# HamFax -- an application for sending and receiving amateur radio facsimiles
# Copyright (C) 2001 Christof Schmitt, DH1CS <cschmit@suse.de>
#  
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#  
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.

CXX=@CXX@
CXXFLAGS=-Wall @QT_CXXFLAGS@ @CXXFLAGS@
CPPFLAGS=@CPPFLAGS@
LIBS=@QT_LIBS@ -laudiofile
QT_MOC=@QT_MOC@
INSTALL=@INSTALL@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
docdir=@datadir@/doc/HamFax
defines=-DDOCDIR='"$(docdir)"'

all: hamfax

clean:
	rm -rfv *~ *.o moc_*.cpp hamfax qhamfax\
        config.cache config.log config.status moc_bnv_qt_test.C\
        doc/*~

install: hamfax
	$(INSTALL) -o root -g root -m 0755 -d $(bindir)
	$(INSTALL) -o root -g root -m 0755 -s hamfax $(bindir)
	$(INSTALL) -o root -g root -m 0755 -d $(docdir)
	$(INSTALL) -o root -g root -m 0644 doc/HamFax.html $(docdir)

.cpp.o:
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) $(defines) -c $<

moc_%.cpp: %.hpp
	$(QT_MOC) $< -o $@

Config.o: Config.cpp Config.hpp

CorrectDialog.o: CorrectDialog.cpp CorrectDialog.hpp

DisplayLevel.o: DisplayLevel.cpp DisplayLevel.hpp

Error.o: Error.cpp Error.hpp

FaxDemodulator.o: FaxDemodulator.cpp FaxDemodulator.hpp

FaxImage.o: FaxImage.cpp FaxImage.hpp

FaxModulator.o: FaxModulator.cpp FaxModulator.hpp

FaxReceiver.o: FaxReceiver.cpp FaxReceiver.hpp

FaxTransmitter.o: FaxTransmitter.cpp FaxTransmitter.hpp FaxImage.hpp

FaxWindow.o: FaxWindow.cpp FaxWindow.hpp\
             CorrectDialog.hpp\
             Error.hpp OptionsDialog.hpp\
             FaxDemodulator.hpp FaxImage.hpp\
             FaxModulator.hpp FaxReceiver.hpp FaxTransmitter.hpp\
             File.hpp HelpDialog.hpp\
             PTC.hpp PTT.hpp ReceiveDialog.hpp\
             Sound.hpp TransmitDialog.hpp

File.o: File.cpp File.hpp

HelpDialog.o: HelpDialog.cpp HelpDialog.hpp

OptionsDialog.o: OptionsDialog.cpp OptionsDialog.hpp

PTC.o: PTC.cpp PTC.hpp Error.hpp

PTT.o: PTT.cpp PTT.hpp Error.hpp

ReceiveDialog.o: ReceiveDialog.cpp ReceiveDialog.hpp\
                 DisplayLevel.hpp Spectrum.hpp

Sound.o: Sound.cpp Sound.hpp Error.hpp

Spectrum.O: Spectrum.cpp Spectrum.hpp

TransmitDialog.o: TransmitDialog.cpp TransmitDialog.hpp

hamfax.o: hamfax.cpp FaxWindow.hpp

hamfax: Config.o moc_Config.o\
        CorrectDialog.o moc_CorrectDialog.o\
        DisplayLevel.o moc_DisplayLevel.o\
        Error.o\
        FaxDemodulator.o moc_FaxDemodulator.o\
        FaxImage.o moc_FaxImage.o\
        FaxModulator.o moc_FaxModulator.o\
        FaxReceiver.o moc_FaxReceiver.o\
        FaxTransmitter.o moc_FaxTransmitter.o\
        FaxWindow.o moc_FaxWindow.o\
        File.o moc_File.o\
        HelpDialog.o moc_HelpDialog.o\
        OptionsDialog.o moc_OptionsDialog.o\
        PTC.o moc_PTC.o\
        PTT.o moc_PTT.o\
        ReceiveDialog.o moc_ReceiveDialog.o\
        Sound.o moc_Sound.o\
        Spectrum.o moc_Spectrum.o\
        TransmitDialog.o moc_TransmitDialog.o\
        hamfax.o
	$(CXX) -o $@ $(CXXFLAGS) $(LIBS) $+
